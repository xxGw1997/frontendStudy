# 闭包
## 如何理解闭包
- 闭包就是一个能够访问其他函数作用域内的变量的函数
- 因为javascript是单线程的,一次只能做一件事情,所以就会有执行栈,这是JavaScript处理多个执行上下文的方式
- 执行上下文,分为两个两个阶段,分别创建阶段和执行阶段
- 创建阶段主要是确定作用域链、和声明变量对象以及确认this的指向
- 执行阶段就是将变量进行赋值、函数引用...

```
var a = '全局'
function f(){
    var b = '内部'
    console.log(b)
    console.log(a)
}

f()
```
- 在执行以上代码时,会先创建一个全局执行上下文,将这个全局执行上下文压入执行栈底,而这个执行上下文中定义了一个变量a以及函数f,并且执行了函数f
- 然后就会进入函数f里面,这时会创建一个函数f的执行上下文并将其压入执行栈中,函数f的执行上下文中定义了变量b还有执行栈里的全局执行上下文的内容以及执行打印b和a的操作
- 首先打印变量b,因为在这个上下文中有变量b所以会找到b的值进行打印,然后再进行打印a的操作,首先会在f函数的执行上下文中找变量a的值,发现没有就沿着作用域链会向外层的执行上下文中找变量a,发现外层有所以就会进行打印a的操作
- 这时所以的操作都做完了,就会先将函数f的执行上下文从栈中释放出去,接着再释放全局的

- 而闭包就是能够访问其他作用域内的变量的函数
```
function f(){
    var a = 'a'
    return function(){
        console.log(a)
    }
}

f()()
```